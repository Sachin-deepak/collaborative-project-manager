"use client";
import {
  createAdapterProvider,
  mitt_default,
  renderQueryString
} from "./chunk-QZNN544A.js";
import {
  require_react
} from "./chunk-QCHXOAYK.js";
import {
  __toESM
} from "./chunk-WOOG5QLI.js";

// node_modules/nuqs/dist/adapters/react.js
var import_react = __toESM(require_react());
var emitter = mitt_default();
function updateUrl(search, options) {
  const url = new URL(location.href);
  url.search = renderQueryString(search);
  const method = options.history === "push" ? history.pushState : history.replaceState;
  method.call(history, history.state, "", url);
  emitter.emit("update", search);
}
function useNuqsReactAdapter() {
  const [searchParams, setSearchParams] = (0, import_react.useState)(() => {
    if (typeof location === "undefined") {
      return new URLSearchParams();
    }
    return new URLSearchParams(location.search);
  });
  (0, import_react.useEffect)(() => {
    const onPopState = () => {
      setSearchParams(new URLSearchParams(location.search));
    };
    emitter.on("update", setSearchParams);
    window.addEventListener("popstate", onPopState);
    return () => {
      emitter.off("update", setSearchParams);
      window.removeEventListener("popstate", onPopState);
    };
  }, []);
  return {
    searchParams,
    updateUrl
  };
}
var NuqsAdapter = createAdapterProvider(useNuqsReactAdapter);
export {
  NuqsAdapter
};
//# sourceMappingURL=nuqs_adapters_react.js.map
